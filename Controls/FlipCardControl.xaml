<UserControl x:Class="FlashCardApp.Controls.FlipCardControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             MinWidth="200" MinHeight="150">
    
    <UserControl.Resources>
        <Storyboard x:Key="FlipToAnswer">
            <DoubleAnimation Storyboard.TargetName="QuestionSide" 
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           To="0" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="AnswerSide" 
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           From="0" To="1" Duration="0:0:0.2" BeginTime="0:0:0.2"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="QuestionSide" 
                                         Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="{x:Static Visibility.Hidden}"/>
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="AnswerSide" 
                                         Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        
        <Storyboard x:Key="FlipToQuestion">
            <DoubleAnimation Storyboard.TargetName="AnswerSide" 
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           To="0" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="QuestionSide" 
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           From="0" To="1" Duration="0:0:0.2" BeginTime="0:0:0.2"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="AnswerSide" 
                                         Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="{x:Static Visibility.Hidden}"/>
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="QuestionSide" 
                                         Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </UserControl.Resources>
    
    <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
            CornerRadius="8" Margin="4" Cursor="Hand">
        <Border.Effect>
            <DropShadowEffect BlurRadius="8" ShadowDepth="2" Color="Gray" Opacity="0.3"/>
        </Border.Effect>
        
        <Grid>
            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¾Ð¹ -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" 
                        VerticalAlignment="Top" Margin="4" Panel.ZIndex="100">
                <Border Background="#2196F3" CornerRadius="12" Margin="2,0">
                    <Button Content="âœï¸" FontSize="12" Width="24" Height="24" 
                            Background="Transparent" Foreground="White" BorderThickness="0" 
                            ToolTip="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÑƒ"
                            Command="{Binding DataContext.EditCardCommand, 
                            RelativeSource={RelativeSource AncestorType=Window}}"
                            CommandParameter="{Binding Card}"
                            Click="Button_Click"/>
                </Border>
                <Border Background="#F44336" CornerRadius="12" Margin="2,0">
                    <Button Content="ðŸ—‘ï¸" FontSize="12" Width="24" Height="24" 
                            Background="Transparent" Foreground="White" BorderThickness="0" 
                            ToolTip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÑƒ"
                            Command="{Binding DataContext.DeleteCardCommand, 
                            RelativeSource={RelativeSource AncestorType=Window}}"
                            CommandParameter="{Binding Card}"
                            Click="Button_Click"/>
                </Border>
            </StackPanel>
            <!-- Ð¡Ñ‚Ð¾Ñ€Ð¾Ð½Ð° Ñ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð¼ -->
            <Border x:Name="QuestionSide" Background="#F8F9FA" CornerRadius="8">
                <Border.RenderTransform>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Border.RenderTransform>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ñ‚ÐµÐ¼Ñ‹ -->
                    <Border Grid.Row="0" Background="{Binding TopicColor}" 
                            CornerRadius="8,8,0,0" Padding="8,4">
                        <TextBlock Text="{Binding Topic}" FontWeight="Bold" 
                                   FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                    </Border>
                    
                    <!-- Ð’Ð¾Ð¿Ñ€Ð¾Ñ -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="12">
                        <TextBlock Text="{Binding Question}" FontSize="14" 
                                   TextWrapping="Wrap" VerticalAlignment="Center"/>
                    </ScrollViewer>
                    
                    <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="8">
                        <Ellipse Width="8" Height="8" Fill="{Binding StatusColor}" Margin="4,0"/>
                        <TextBlock Text="{Binding Status}" FontSize="10" Foreground="#666"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Ð¡Ñ‚Ð¾Ñ€Ð¾Ð½Ð° Ñ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð¼ -->
            <Border x:Name="AnswerSide" Background="#E3F2FD" CornerRadius="8" 
                    Visibility="Hidden">
                <Border.RenderTransform>
                    <ScaleTransform ScaleX="0" ScaleY="1"/>
                </Border.RenderTransform>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
                    <Border Grid.Row="0" Background="#1976D2" 
                            CornerRadius="8,8,0,0" Padding="8,4">
                        <TextBlock Text="ÐžÐ¢Ð’Ð•Ð¢" FontWeight="Bold" 
                                   FontSize="12" Foreground="White" HorizontalAlignment="Center"/>
                    </Border>
                    
                    <!-- ÐžÑ‚Ð²ÐµÑ‚ -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="12">
                        <TextBlock Text="{Binding Answer}" FontSize="14" 
                                   TextWrapping="Wrap" VerticalAlignment="Center"/>
                    </ScrollViewer>
                    
                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð»Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð° -->
                    <TextBlock Grid.Row="2" Text="ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð°" 
                               FontSize="10" Foreground="#666" HorizontalAlignment="Center" 
                               Margin="8"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</UserControl> 